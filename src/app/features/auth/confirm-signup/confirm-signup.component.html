<div class="confirm-signup-container">
  <h2>Confirm Your Account</h2>
  <p *ngIf="username">
    A confirmation code has been sent to <strong>{{ username }}</strong>.
    Please enter the code below to activate your account.
  </p>
  <p *ngIf="!username && !errorMessage" class="error-message">
    Loading username or username not provided...
  </p>

  <form [formGroup]="confirmForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="username-display">Username (Email)</label>
      <input type="email" id="username-display" formControlName="username" placeholder="Your email address" readonly>
    </div>

    <div class="form-group">
      <label for="code">Confirmation Code</label>
      <input type="text" id="code" formControlName="code" placeholder="Enter confirmation code" required>
      <div *ngIf="confirmForm.get('code')?.invalid && (confirmForm.get('code')?.dirty || confirmForm.get('code')?.touched)" class="error-message">
        <small *ngIf="confirmForm.get('code')?.errors?.['required']">Confirmation code is required.</small>
        <small *ngIf="confirmForm.get('code')?.errors?.['minlength']">Code must be at least 6 characters.</small>
      </div>
    </div>

    <div *ngIf="errorMessage" class="error-message server-error">
      {{ errorMessage }}
    </div>

    <div *ngIf="successMessage" class="success-message">
      {{ successMessage }}
    </div>

    <button type="submit" [disabled]="confirmForm.invalid || isLoading || !username">
      {{ isLoading ? 'Confirming...' : 'Confirm Account' }}
    </button>

    <p class="resend-link">
      Didn't receive a code?
      <button type="button" (click)="onResendCode()" [disabled]="isLoading || !username" class="link-button">
        Resend Code
      </button>
    </p>
  </form>

  <p class="login-link">
    Already confirmed? <a routerLink="/login">Log in here</a>
  </p>
</div>
